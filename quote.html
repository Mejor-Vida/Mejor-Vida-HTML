<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cotización gratuita — Mejor Vida Insurance</title>
  <meta name="robots" content="noindex, follow" />
  <style>
    :root {
      --page-bg: #f5f5f5;
      --container-bg: #ffffff;
      --accent: #d17e00;
      --max-width: 960px;
    }
    html, body {
      height: 100%;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--page-bg);
      color: #222;
    }
    header {
      text-align: center;
      padding: 28px 16px 8px;
    }
    h1 {
      margin: 0;
      font-size: 28px;
      color: #0f4db6;
    }
    p.lead {
      margin: 6px 0 0;
      color: #444;
    }
    .form-shell {
      max-width: var(--max-width);
      margin: 28px auto;
      padding: 20px;
      background: var(--container-bg);
      border-radius: 8px;
      box-shadow: 0 6px 22px rgba(10,20,40,0.06);
    }

    /* make iframe fill the container and be responsive; allow wrapper to scroll */
    .iframe-wrap {
      width: 100%;
      /* keep the form visible but allow wrapper to scroll if content is taller than viewport */
      max-height: calc(100vh - 160px); /* adjust 160px if your header/footer size changes */
      overflow-y: auto; /* ALLOW vertical scrolling */
      border-radius: 6px;
      -webkit-overflow-scrolling: touch; /* smooth scrolling on iOS */
    }

    .iframe-wrap iframe {
      display: block;
      width: 100%;
      /* iframe height will be set via JS using data-height if available.
         Setting a reasonable minimum helps on small screens: */
      min-height: 700px;
      border: 0;
      border-radius: 3px;
      box-sizing: border-box;
    }

    /* slim footer for mobile readability */
    @media (max-width: 520px) {
      h1 { font-size: 22px; }
      .form-shell { padding: 12px; margin: 12px; }
      .iframe-wrap { max-height: calc(100vh - 140px); }
      .iframe-wrap iframe { min-height: 900px; }
    }
  </style>
</head>
<body>
  <header>
    <h1 id="pageTitle">Get a Free Quote / Cotización gratuita</h1>
    <p class="lead">Complete the form below and a licensed agent will contact you. / Complete el formulario a continuación y un agente autorizado se comunicará con usted.</p>
  </header>

  <main>
    <div class="form-shell" role="main" aria-labelledby="pageTitle">
      <div class="iframe-wrap" id="form-container" aria-live="polite">
        <!-- YOUR AGENT CRM EMBED CODE — pasted exactly as provided -->
        <iframe
            src="https://crm.mejorvidainsurance.com/widget/form/uApX9m6VUhke3XRK4Iov"
            style="width:100%;height:100%;border:none;border-radius:3px"
            id="inline-uApX9m6VUhke3XRK4Iov"
            data-layout="{'id':'INLINE'}"
            data-trigger-type="alwaysShow"
            data-trigger-value=""
            data-activation-type="alwaysActivated"
            data-activation-value=""
            data-deactivation-type="neverDeactivate"
            data-deactivation-value=""
            data-form-name="MVI-Final Expense – Quote Form (Bilingual)"
            data-height="1486"
            data-layout-iframe-id="inline-uApX9m6VUhke3XRK4Iov"
            data-form-id="uApX9m6VUhke3XRK4Iov"
            title="MVI-Final Expense – Quote Form (Bilingual)"
        >
        </iframe>
        <script src="https://crm.mejorvidainsurance.com/js/form_embed.js"></script>
        <!-- END EMBED CODE -->
      </div>
    </div>
  </main>

  <script>
    // Ensure the iframe has a usable height (reads data-height if available).
    // Also reapply after a short delay in case the embed script modifies the DOM.
    (function ensureIframeHeight() {
      function applyHeight() {
        var iframe = document.getElementById('inline-uApX9m6VUhke3XRK4Iov');
        var wrapper = document.getElementById('form-container');
        if (!iframe || !wrapper) return;

        // Use the data-height attribute if provided by the embed code
        var dh = iframe.getAttribute('data-height');
        if (dh && !isNaN(Number(dh))) {
          // set iframe height to data-height but clamp to wrapper max height for small viewports
          var desired = Number(dh);
          // compute max available height inside viewport based on wrapper max-height CSS
          var maxAvailable = window.innerHeight - 160; // matches CSS calc(100vh - 160px)
          var finalHeight = Math.min(desired, Math.max(600, maxAvailable));
          iframe.style.height = finalHeight + 'px';
        } else {
          // fallback: set a reasonable height
          iframe.style.height = '900px';
        }

        // Ensure wrapper allows vertical scrolling (defensive)
        wrapper.style.overflowY = 'auto';
        wrapper.style.webkitOverflowScrolling = 'touch';
      }

      // initial apply
      document.addEventListener('DOMContentLoaded', applyHeight);
      // apply again after a short delay to handle async embed script
      setTimeout(applyHeight, 600);
      setTimeout(applyHeight, 2000);

      // also adjust on resize
      window.addEventListener('resize', applyHeight);
    })();
  </script>
</body>
</html>
